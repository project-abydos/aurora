<td-layout-nav>
  <div td-toolbar-content layout="row" layout-align="center center" flex class="animated slideInDown">
    <span>{{appTitle}}</span>
    <span flex></span>
    <span class="julian-date">Julian Date: {{julianDate}}</span>
  </div>
  <div layout-gt-sm="row" tdMediaToggle="gt-xs" [mediaClasses]="['push-sm']">
    <div flex-gt-sm="100">
      <md-card *ngIf="mdc" class="animated zoomIn">

        <div layout="row" layout-align="start center" class="pad-left-sm pad-right-sm">
          <span class="push-left-sm" flex=2>
              <span class="md-title">
                  <button md-icon-button [mdMenuTriggerFor]="menu">
                      <md-icon>more_vert</md-icon>
                    </button>
                    <md-menu #menu="mdMenu">
                      <button md-menu-item>
                        <md-icon>dialpad</md-icon>
                        <span>Redial</span>
          </button>
          <button md-menu-item disabled>
                        <md-icon>voicemail</md-icon>
                        <span>Check voicemail</span>
                      </button>
          <button md-menu-item>
                        <md-icon>notifications_off</md-icon>
                        <span>Disable alerts</span>
                      </button>
          </md-menu>
          </span>
          </span>
          <td-search-box #searchBox backIcon="arrow_back" class="push-right-sm" placeholder="Search here" (searchDebounce)="search($event)"
            flex=1>
          </td-search-box>
        </div>
        <md-divider></md-divider>
        <table td-data-table class="table--fixed">
          <thead>
            <th td-data-table-column class="JCN">JCN</th>
            <th td-data-table-column class="WorkCenter">Shop</th>
            <th td-data-table-column class="EquipID">S/N</th>
            <th td-data-table-column class="Discrepancy">Discrepancy</th>
            <th td-data-table-column class="CFPComments">CFP Notes</th>
            <th td-data-table-column class="ETIC">ETIC</th>
            <th td-data-table-column class="ApprovalStatus">Status</th>
          </thead>
          <tbody>
            <ng-container *ngFor="let row of filteredData">
              <tr td-data-table-row [ngClass]="[row.CC, row.isExpanded ? 'expanded' : 'collapsed']" (click)="toggleExpanded(row)">

                <td td-data-table-cell [numeric]="true" class="JCN">
                  <button md-button md-raised color="primary" (click)="$event.stopPropagation()">{{row.JCN}}</button>
                </td>

                <td td-data-table-cell class="WorkCenter">
                  <span>{{row.WorkCenter}}</span>
                </td>

                <td td-data-table-cell class="EquipID">
                  <span>{{row.EquipID}}</span>
                </td>

                <td td-data-table-cell class="Discrepancy ellipses">
                  <span>{{row.Discrepancy}}</span>
                </td>

                <td td-data-table-cell class="CFPComments ellipses">
                  <span>{{row.CFPComments}}</span>
                </td>

                <td td-data-table-cell class="ETIC" *ngIf="!row.isExpanded">
                  <span>{{row.ETIC}}</span>
                </td>

                <td td-data-table-cell class="ETIC" *ngIf="row.isExpanded">
                  <input mdInput [mdDatepicker]="picker" placeholder="Choose a date" [(ngModel)]="row.eticDate">
                  <md-datepicker-toggle mdSuffix [for]="picker"></md-datepicker-toggle>
                  <md-datepicker #picker></md-datepicker>
                </td>

                <td td-data-table-cell class="ApprovalStatus">
                  <md-select placeholder="" [(ngModel)]="row.ApprovalStatus" name="status" (click)="$event.stopPropagation()">
                    <md-option *ngFor="let status of approvalOptions" [value]="status.value">
                      {{status.label}}
                    </md-option>
                  </md-select>
                </td>

              </tr>

              <tr class="expanded-row {{row.CC}}" [@slideToggle] *ngIf="row.isExpanded">
                <td colspan="7">
                  <md-card class="job-info">
                    <md-card-title>Job Info</md-card-title>
                    <md-card-content>
                      <form>
                        <md-form-field class="wide">
                          <input mdInput placeholder="When Discovered" disabled [value]="row.WhenDiscText">
                        </md-form-field>
                        <md-form-field class="wide">
                          <input mdInput placeholder="Delay Code" disabled [value]="row.DelayCodeText">
                        </md-form-field>
                        <md-form-field class="wide">
                          <input mdInput placeholder="Down Time" disabled [value]="row.DownTimeCodeText">
                        </md-form-field>
                      </form>
                    </md-card-content>
                  </md-card>

                  <md-card class="job-history">
                    <md-card-title>History</md-card-title>
                    <md-card-content>

                    </md-card-content>
                  </md-card>
                </td>

              </tr>
            </ng-container>
          </tbody>
        </table>

        <div class="md-padding" *ngIf="filteredData.length < 1" layout="row" layout-align="center center">
          <h3>No results to display.</h3>
        </div>

      </md-card>

    </div>

  </div>
  <td-layout-footer>
    <div layout="row" layout-align="start center">
      <span class="md-caption">Developed by the 5 CBCS/SCS, Robins AFB, GA.</span>
      <span flex></span>
      <md-icon class="md-icon-ux" svgIcon="assets:teradata-ux"></md-icon>
    </div>
  </td-layout-footer>
</td-layout-nav>